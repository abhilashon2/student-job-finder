<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Student Jobs Finder</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body, html { height:100%; font-family:Arial,sans-serif; background:#f4f4f9; transition: background .35s ease, color .35s ease; }

.notification {
  position: relative;
  font-size: 1.3rem;
  cursor: pointer;
  color: white;
  margin-left: 15px;
}

.notification span {
  position: absolute;
  top: -8px;
  right: -12px;
  background: red;
  color: white;
  font-size: 0.7rem;
  padding: 2px 6px;
  border-radius: 50%;
}
/* Dark mode containers */
body.dark-mode .container {
  background:#1e1e1e;
  color:#f4f4f9;
  border: 1px solid #333;
}

body.dark-mode input,
body.dark-mode select,
body.dark-mode textarea {
  background:#2a2a2a;
  color:#f4f4f9;
  border:1px solid #555;
}

body.dark-mode input::placeholder,
body.dark-mode textarea::placeholder {
  color:#aaa;
}
#landing {
  height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  background: linear-gradient(-45deg, #ff4e50, #f9d423, #24c6dc, #5433ff, #20bdff, #a8ff78);
  background-size: 400% 400%;
  animation: gradientMove 10s ease infinite;
  font-family: Arial, sans-serif;
  color: white;
}
@keyframes gradientMove { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
@keyframes buttonGradient { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

#landing h1 { font-size: 2.5em; margin-bottom: 15px; }
#landing p { font-size: 1.2rem; margin: 0 0 25px 0; }
#landing button {
  padding: 12px 28px; font-size: 1.1em; border: none; border-radius: 30px;
  background: linear-gradient(45deg, #ff4e50, #f9d423, #20bdff, #5433ff);
  background-size: 300% 300%; color: white; font-weight: bold; cursor: pointer;
  transition: transform 0.3s ease; animation: buttonGradient 6s ease infinite;
}
#landing button:hover { transform: scale(1.1); }

/* Navbar */
header { background:#4f46e5; padding:1rem; text-align:center; color:white; font-size:1.5rem; font-weight:bold; position:relative; }
nav { background:#3730a3; display:flex; justify-content:space-between; align-items:center; padding:0.8rem 1rem; position:fixed; top:0; width:100%; z-index:999; }
nav .menu { display:flex; gap:1rem; }
nav .menu a { color:white; text-decoration:none; font-weight:bold; }
nav .hamburger { display:none; font-size:1.5rem; cursor:pointer; color:white; margin-right:auto; } /* LEFT side */
@media (max-width:600px){
  nav .menu { display:none; flex-direction:column; background:#3730a3; position:absolute; top:100%; left:0; width:180px; padding:0.5rem; border-radius:8px; }
  nav .menu a { padding:0.5rem; border-bottom:1px solid rgba(255,255,255,0.2); }
  nav .menu a:last-child { border-bottom:none; }
  nav .menu.show { display:flex; }
  nav .hamburger { display:block; }
}

#main-content { display:none; }
.content { padding-top:5rem; max-width:900px; margin:2rem auto; }
.container { background:white; padding:1.5rem; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.1); margin-bottom:2rem; transition: background .35s ease, color .35s ease; }
h2 { margin-bottom:1rem; color:#4f46e5; text-align:center; }
label { display:block; margin:0.5rem 0 0.2rem; font-weight:bold; }
input, select, textarea { width:100%; padding:0.8rem; border:1px solid #ccc; border-radius:8px; margin-bottom:1rem; }
button { background:#4f46e5; color:white; border:none; padding:0.8rem 1.2rem; border-radius:10px; cursor:pointer; font-size:1rem; transition:0.3s; }
button:hover { background:#3c38b3; }

.hidden { display:none; }
.job-card { border:1px solid #ddd; padding:1rem; border-radius:10px; margin-bottom:1rem; text-align:left; }
.job-card h3 { margin-bottom:0.5rem; color:#4f46e5; }
.apply-btn { background:#10b981; }
.apply-btn:hover { background:#059669; }
.msg-btn { background:#f59e0b; margin-top:0.5rem; }
.msg-btn:hover { background:#d97706; }
footer { background:#4f46e5; color:white; text-align:center; padding:1rem; margin-top:2rem; transition: background .35s ease; }
.card-container { display:flex; gap:1rem; flex-wrap:wrap; justify-content:center; margin-top:1rem; }
.info-card { flex:1 1 250px; padding:1rem; border:1px solid #ddd; border-radius:12px; background:#fafafa; text-align:center; box-shadow:0 2px 8px rgba(0,0,0,0.05); cursor:pointer; transition:0.3s; }
.info-card:hover { background:#f0f0ff; }


/* Dark Mode */
body.dark-mode { background:#121212; color:#e9eef6; }
body.dark-mode .container { background:#1e1e1e; color:#f4f4f9; }
body.dark-mode nav { background:#0b1220; }
body.dark-mode header, body.dark-mode footer { background:#0b1220; }
body.dark-mode .info-card { background:#1c1c1c; border-color:#333; }
#mode-toggle {
  border:none; background:rgba(255,255,255,0.06); color:white; padding:6px 10px;
  border-radius:8px; cursor:pointer; font-weight:600; margin-left:10px;
}
</style>
</head>
<body>

<!-- Landing -->
<div id="landing">
  <h1>üéì Student Jobs Finder</h1>
  <p>Find part-time jobs, earn experience, connect with employers.</p>
  <button id="enter-btn">Enter Site</button>
</div>

<!-- Main -->
<div id="main-content">
  <header>Student Jobs Finder</header>
  <nav>
  	
    <div class="hamburger" onclick="toggleMenu()">‚ò∞</div>
    <div class="menu" id="menu-links">
      <a href="#" onclick="showPage('home')">Home</a>
      <a href="#" onclick="showPage('about')">About</a>
      <a href="#" onclick="showPage('contact')">Contact</a>
      <a href="#" onclick="showPage('login')">Jobs</a>
      <a href="#" id="logout-link" class="hidden" onclick="logout()">Logout</a>
    </div>
    <div class="notification" style="display:none;">üîî <span id="notif-count">0</span></div>
<button id="mode-toggle">üåô Dark Mode</button>
   
  </nav>

  <div class="content">
    <!-- Home -->
    <div id="home-page" class="container">
      <h2>Welcome to Student Jobs Finder</h2>
      <div class="card-container">
        <div class="info-card" onclick="showPage('login')">
          <h3>üë®‚Äçüéì Students</h3>
          <p>Apply for part-time jobs and gain experience.</p>
        </div>
        <div class="info-card" onclick="showPage('login')">
          <h3>üè¢ Employers</h3>
          <p>Post quick jobs and connect with eager students.</p>
        </div>
        <div class="info-card" onclick="showPage('jobs')">
          <h3>üì© Messages</h3>
          <p>Employers can message applicants directly.</p>
        </div>
      </div>
    </div>

    <!-- About -->
    <div id="about-page" class="container hidden">
      <h2>About Us</h2>
      <p>Student Jobs Finder connects students and employers for flexible, short-term jobs and real experience opportunities.</p>
    </div>

    <!-- Contact -->
    <div id="contact-page" class="container hidden">
      <h2>Contact Us</h2>
      <p>Email: support@studentjobs.com</p>
      <p>Phone: +91-9876543210</p>
      <label>Your Message:</label>
      <textarea rows="4" placeholder="Type your message..."></textarea>
      <button>Send</button>
    </div>

    <!-- Login -->
    <div id="login-section" class="container hidden">
      <h2>Login</h2>
      <label>Name</label><input type="text" id="name">
      <label>Email</label><input type="email" id="email">
      <label>Password</label><input type="password" id="password">
      <label>Confirm Password</label><input type="password" id="confirm-password">
      <label>Role</label>
      <select id="role">
        <option value="student">Student</option>
        <option value="employer">Employer</option>
      </select>
      <button onclick="login()">Login</button>
    </div>

    <!-- Student Jobs -->
    <div id="jobs-section" class="container hidden">
      <h2>Available Jobs</h2>
      <div id="student-job-list"></div>
      <h2>Messages</h2>
      <div id="student-messages"></div>
    </div>

    <!-- Employer -->
    <div id="employer-section" class="container hidden">
      <h2>Post a Job</h2>
      <label>Job Title</label><input type="text" id="job-title">
      <label>Job Description</label><input type="text" id="job-desc">
      <label>Duration</label><input type="text" id="job-duration">
      <button onclick="postJob()">Post Job</button>
      <h2>My Posted Jobs</h2>
      <div id="posted-jobs"></div>
      <label>Job Location</label>
<input type="text" id="job-location" placeholder="Click 'Get Location' or enter manually">
<button type="button" onclick="getLocation()">üìç Get Location</button>
    </div>
  </div>
  <footer>&copy; 2025 Student Jobs Finder</footer>
</div>

<script>
let currentUser=null;
let messages=JSON.parse(localStorage.getItem("messages")) || [];
let jobs=JSON.parse(localStorage.getItem("jobs")) || [];

document.getElementById('enter-btn').addEventListener('click', ()=>{
  document.getElementById('landing').style.display='none';
  document.getElementById('main-content').style.display='block';
});

function toggleMenu(){document.getElementById('menu-links').classList.toggle('show');}

function showPage(page){
  const ids = {
    home: "home-page",
    about: "about-page",
    contact: "contact-page",
    login: "login-section",
    jobs: "jobs-section",
    employer: "employer-section"
  };
  for (let key in ids){
    document.getElementById(ids[key]).classList.add("hidden");
  }
  document.getElementById(ids[page]).classList.remove("hidden");

  // reset notifications when employer opens their dashboard
  if(page==="employer" && currentUser?.role === "employer"){
    // mark notifications as cleared
    document.getElementById("notif-count").textContent="0";
    // optionally, you could also store a "last seen" state here later
  }
}

function login(){
  const name=document.getElementById('name').value.trim();
  const email=document.getElementById('email').value.trim();
  const password=document.getElementById('password').value.trim();
  const confirmPassword=document.getElementById('confirm-password').value.trim();
  const role=document.getElementById('role').value;

  if(!name){ alert("Please enter your name!"); return; }
  const emailPattern=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if(!emailPattern.test(email)){ alert("Please enter a valid email address!"); return; }
  if(password.length < 6){ alert("Password must be at least 6 characters long!"); return; }
  if(password !== confirmPassword){ alert("Passwords do not match!"); return; }

  currentUser={name,email,role};
  document.getElementById('login-section').classList.add('hidden');
  document.getElementById("logout-link").classList.remove("hidden");

  // show/hide notification bell
  if(role === "employer"){
    document.querySelector(".notification").style.display = "inline-block";
    showPage("employer"); 
    renderEmployerJobs(); 
    updateNotifications();
  } else {
    document.querySelector(".notification").style.display = "none";
    showPage("jobs"); 
    renderStudentJobs();
  }
}

function logout(){
  currentUser = null;
  alert("Logged out successfully!");
  showPage("login");
  document.getElementById("logout-link").classList.add("hidden");
  document.querySelector(".notification").style.display = "none"; // üîí hide bell
}
function postJob(){
  const title=document.getElementById('job-title').value.trim();
  const desc=document.getElementById('job-desc').value.trim();
  const duration=document.getElementById('job-duration').value.trim();
  const location=document.getElementById('job-location').value.trim();

  if(!title || !desc || !duration){
    alert("Please fill all fields!");
    return;
  }

  const job = {
    title,
    desc,
    duration,
    location,                    // üìç save GPS/manual location
    employer: currentUser.name,  // üîí link employer
    employerEmail: currentUser.email,
    applicants:[]
  };

  jobs.push(job);
  saveData();
  alert("Job posted successfully!");

  document.getElementById('job-title').value='';
  document.getElementById('job-desc').value='';
  document.getElementById('job-duration').value='';
  document.getElementById('job-location').value='';

  renderEmployerJobs();
  renderStudentJobs();
  updateNotifications();
}

function renderEmployerJobs(){
  if(currentUser?.role !== "employer") return; // üîí safety check

  const posted=document.getElementById('posted-jobs');
  posted.innerHTML='';
  jobs.filter(job => job.employer === currentUser.name)
    .forEach((job)=>{
      const div=document.createElement('div'); 
    div.className='job-card';
    div.innerHTML=`<h3>${job.title}</h3>
               <p>${job.desc}</p>
               <p><strong>Duration:</strong> ${job.duration}</p>
               <p><strong>Location:</strong> ${job.location || "N/A"}</p>`;

    // Show applicants
    if(job.applicants.length > 0){
      const applicantsList = document.createElement('ul');
      applicantsList.innerHTML = "<strong>Applicants:</strong>";
      
      job.applicants.forEach(applicant=>{
        const li=document.createElement('li');
        li.textContent=applicant + " ";

        // message button for each applicant
        const msgBtn=document.createElement('button');
        msgBtn.className='msg-btn';
        msgBtn.innerText='Message';
        msgBtn.onclick=()=>{
          const msg=prompt(`Send message to ${applicant}:`);
          if(msg){
            messages.push({job:job.title,msg,to:applicant});
            saveData();
            alert(`Message sent to ${applicant}!`);
            renderStudentMessages();
          }
        };

        li.appendChild(msgBtn);
        applicantsList.appendChild(li);
      });

      div.appendChild(applicantsList);
    } else {
      div.innerHTML += `<p><em>No applicants yet</em></p>`;
    }

    posted.appendChild(div);
  });
}

function renderStudentJobs(){
  const list=document.getElementById('student-job-list');
  list.innerHTML='';

  if(jobs.length === 0){
    list.innerHTML = "<p>No jobs available yet. Please check back later!</p>";
    return;
  }

  jobs.forEach((job)=>{
    const div=document.createElement('div');
    div.className='job-card';
    div.innerHTML=`<h3>${job.title}</h3>
               <p>${job.desc}</p>
               <p><strong>Duration:</strong> ${job.duration}</p>
               <p><strong>Location:</strong> ${job.location || "N/A"}</p>`;
    const applyBtn=document.createElement('button');
    applyBtn.className='apply-btn';
    applyBtn.innerText='Apply';
    if(job.applicants.includes(currentUser.name)){
      applyBtn.disabled=true;
      applyBtn.innerText="Applied";
    }
    applyBtn.onclick=()=>{
      if(!job.applicants.includes(currentUser.name)){
        job.applicants.push(currentUser.name);
        saveData();
        alert('Applied successfully!');
        renderStudentJobs();
        renderEmployerJobs();
        updateNotifications();
      }
    };
    div.appendChild(applyBtn);
    list.appendChild(div);
  });
  renderStudentMessages();
}
function updateNotifications(){
  const notif=document.getElementById("notif-count");
  let count=0;

  if(currentUser?.role === "employer"){
    jobs.forEach(job=>{
      if(job.employer === currentUser.name && job.applicants.length > 0){
        count += job.applicants.length;
      }
    });
  }

  notif.textContent = count;
}
function renderStudentMessages(){
  const msgDiv=document.getElementById('student-messages');
  msgDiv.innerHTML='';
  messages.filter(m => m.to === currentUser?.name).forEach(m=>{
    const div=document.createElement('div');
    div.className='job-card';
    div.innerHTML=`<p><strong>${m.job}:</strong> ${m.msg}</p>`;
    msgDiv.appendChild(div);
  });
}

function saveData(){
  localStorage.setItem("jobs", JSON.stringify(jobs));
  localStorage.setItem("messages", JSON.stringify(messages));
}
document.querySelectorAll('#menu-links a').forEach(link => {
  link.addEventListener('click', () => {
    document.getElementById('menu-links').classList.remove('show');
  });
});

/* Dark Mode */
document.getElementById("mode-toggle").addEventListener("click", function() {
  document.body.classList.toggle("dark-mode");
  if(document.body.classList.contains("dark-mode")) {
    this.textContent = "‚òÄÔ∏è Light Mode";
    localStorage.setItem("dark-mode","on");
  } else {
    this.textContent = "üåô Dark Mode";
    localStorage.setItem("dark-mode","off");
  }
});
if(localStorage.getItem("dark-mode")==="on"){
  document.body.classList.add("dark-mode");
  document.getElementById("mode-toggle").textContent="‚òÄÔ∏è Light Mode";
}
function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition, showError);
  } else {
    alert("Geolocation is not supported by this browser.");
  }
}

function showPosition(position) {
  const lat = position.coords.latitude;
  const lon = position.coords.longitude;
  document.getElementById("job-location").value = `Lat: ${lat.toFixed(4)}, Lon: ${lon.toFixed(4)}`;
}

function showError(error) {
  switch(error.code) {
    case error.PERMISSION_DENIED:
      alert("User denied the request for Geolocation.");
      break;
    case error.POSITION_UNAVAILABLE:
      alert("Location information is unavailable.");
      break;
    case error.TIMEOUT:
      alert("The request to get user location timed out.");
      break;
    case error.UNKNOWN_ERROR:
      alert("An unknown error occurred.");
      break;
  }
}
</script>
</body>
</html>